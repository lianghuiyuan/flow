var y=Object.defineProperty;var B=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var E=(t,u,e)=>u in t?y(t,u,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[u]=e,h=(t,u)=>{for(var e in u||(u={}))I.call(u,e)&&E(t,e,u[e]);if(B)for(var e of B(u))M.call(u,e)&&E(t,e,u[e]);return t};var f=(t,u,e)=>new Promise((l,a)=>{var c=s=>{try{r(e.next(s))}catch(n){a(n)}},i=s=>{try{r(e.throw(s))}catch(n){a(n)}},r=s=>s.done?l(s.value):Promise.resolve(s.value).then(c,i);r((e=e.apply(t,u)).next())});import{B as P,a as v}from"./index.ef1baeca.js";import{B as A}from"./BasicForm.35bf3188.js";import{u as N}from"./useForm.8dec0b63.js";import{c as x,s as S}from"./dicType.33107a4b.js";import{F as k}from"./constantEnum.bf6653fb.js";import{az as R,a as q,w as T,j as F,h as j,aB as D,o as C,k as O,B as V,p as $,aC as G}from"./index.741c5d36.js";const ee=[{title:"\u540D\u79F0",dataIndex:"name",align:"left"},{title:"\u7F16\u7801",dataIndex:"code",align:"left"},{title:"\u6392\u5E8F",dataIndex:"orderNo",width:100},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",width:180}],te=[{field:"keyword",label:"\u5173\u952E\u5B57",component:"Input",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0/\u7F16\u7801"},labelWidth:60,colProps:{span:6,lg:{span:6,offset:0},sm:{span:10,offset:0},xs:{span:16,offset:0}}}],L=[{field:"id",label:"ID",component:"Input",show:!1},{field:"pid",label:"pid",required:!1,component:"Input",show:!1},{field:"name",label:"\u540D\u79F0",required:!0,component:"Input",rules:[{required:!0,whitespace:!0,message:"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A\uFF01"},{max:64,message:"\u5B57\u7B26\u957F\u5EA6\u4E0D\u80FD\u5927\u4E8E64\uFF01"}],colProps:{span:24}},{field:"code",label:"\u7F16\u7801",required:!0,component:"Input",colProps:{span:24}},{field:"orderNo",label:"\u6392\u5E8F\u53F7",required:!1,component:"InputNumber"}],U=q({name:"DicTypeModal",components:{BasicModal:P,BasicForm:A},emits:["success","register"],setup(t,{emit:u}){const e=T(!0),[l,{resetFields:a,updateSchema:c,setFieldsValue:i,validate:r}]=N({labelWidth:100,schemas:L,showActionButtonGroup:!1}),s=o=>[{trigger:"blur",validator:(m,g)=>g?x({id:o.id,field:o.field,fieldValue:g,fieldName:o.fieldName}).then(p=>p?Promise.resolve():Promise.reject(o.fieldName+"\u5DF2\u5B58\u5728\uFF0C\u8BF7\u4FEE\u6539\uFF01")).catch(p=>Promise.reject(p)):Promise.resolve()}],[n,{setModalProps:d,closeModal:b}]=v(o=>f(this,null,function*(){yield a(),d({confirmLoading:!1}),e.value=!!(o!=null&&o.isUpdate);let m=o.record;yield c([{field:"code",dynamicRules:()=>[{required:!0,whitespace:!0,message:"\u7F16\u7801\u4E0D\u80FD\u4E3A\u7A7A\uFF01"},{pattern:new RegExp(k.SN),type:"string",message:"\u8BF7\u8F93\u5165\u82F1\u6587\u6216\u6570\u5B57\uFF01"},{max:64,message:"\u5B57\u7B26\u957F\u5EA6\u4E0D\u80FD\u5927\u4E8E64\uFF01"},...s({id:F(e)&&m&&m.id||"",field:"code",fieldValue:"",fieldName:"\u7F16\u7801"})]}]),F(e)&&i(h({},o.record))})),w=j(()=>F(e)?"\u4FEE\u6539":"\u65B0\u589E");function _(){return f(this,null,function*(){try{d({confirmLoading:!0});const o=yield r();yield S(o),b(),u("success")}finally{d({confirmLoading:!1})}})}return{registerModal:n,registerForm:l,getTitle:w,handleSubmit:_}}});function z(t,u,e,l,a,c){const i=D("BasicForm"),r=D("BasicModal");return C(),O(r,G(t.$attrs,{onRegister:t.registerModal,title:t.getTitle,onOk:t.handleSubmit}),{default:V(()=>[$(i,{onRegister:t.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}var W=R(U,[["render",z]]),ue=Object.freeze(Object.defineProperty({__proto__:null,default:W},Symbol.toStringTag,{value:"Module"}));export{ue as D,W as G,ee as c,te as s};
