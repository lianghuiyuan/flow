var C=Object.defineProperty;var f=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var g=(e,o,t)=>o in e?C(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,m=(e,o)=>{for(var t in o||(o={}))w.call(o,t)&&g(e,t,o[t]);if(f)for(var t of f(o))E.call(o,t)&&g(e,t,o[t]);return e};var p=(e,o,t)=>new Promise((u,i)=>{var d=a=>{try{n(t.next(a))}catch(l){i(l)}},r=a=>{try{n(t.throw(a))}catch(l){i(l)}},n=a=>a.done?u(a.value):Promise.resolve(a.value).then(d,r);n((t=t.apply(e,o)).next())});import{B as I,a as b}from"./index.ef1baeca.js";import{B as L}from"./BasicForm.35bf3188.js";import{u as P}from"./useForm.8dec0b63.js";import{eS as M,dO as c,az as _,a as v,w as y,j as F,h as A,aB as B,o as R,k as S,B as q,p as T,aC as k}from"./index.741c5d36.js";const H=[{title:"\u8BBF\u95EEIP",dataIndex:"ip",width:100,align:"left"},{title:"\u64CD\u4F5C\u4EBAID",dataIndex:"operationId",width:100,align:"left"},{title:"\u64CD\u4F5C\u4EBA\u7684\u59D3\u540D",dataIndex:"operationUsername",width:100,align:"left"},{title:"\u64CD\u4F5C\u4EBA\u59D3\u540D",dataIndex:"operationPerson",width:100,align:"left"},{title:"\u64CD\u4F5C\u5185\u5BB9",dataIndex:"operationContent",width:100,align:"left"},{title:"\u64CD\u4F5C\u65F6\u95F4",dataIndex:"operationTime",width:100,align:"left",customRender:({text:e})=>M(e)}],J=[{field:"keyword",label:"\u5173\u952E\u5B57",component:"Input",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0/\u7F16\u7801"},labelWidth:60,colProps:{span:6,lg:{span:6,offset:0},sm:{span:10,offset:0},xs:{span:16,offset:0}}},{field:"dateRange",label:"\u65F6\u95F4\u8303\u56F4",component:"RangePicker",labelWidth:80,colProps:{span:6,lg:{span:6,offset:0},sm:{span:10,offset:0},xs:{span:16,offset:0}}}],x=[{field:"ip",label:"\u8BBF\u95EEip",required:!1,component:"Input",show:!0},{field:"operationId",label:"\u64CD\u4F5C\u4EBAid",required:!1,component:"Input",show:!0},{field:"operationUsername",label:"\u64CD\u4F5C\u4EBA\u7684\u59D3\u540D",required:!1,component:"Input",show:!0,rules:[{required:!1,whitespace:!0,message:"\u64CD\u4F5C\u4EBA\u7684\u59D3\u540D\u4E0D\u80FD\u4E3A\u7A7A\uFF01"},{max:32,message:"\u5B57\u7B26\u957F\u5EA6\u4E0D\u80FD\u5927\u4E8E32\uFF01"}]},{field:"operationPerson",label:"\u64CD\u4F5C\u4EBA\u59D3\u540D",required:!1,component:"Input",show:!0},{field:"operationContent",label:"\u64CD\u4F5C\u5185\u5BB9",required:!1,component:"Input",show:!0},{field:"operationTime",label:"\u64CD\u4F5C\u65F6\u95F4",required:!0,component:"DatePicker",show:!0}],K=e=>{const o=e&&{pageNum:e.pageNum,pageSize:e.pageSize};let t=e||{};e.dateRange&&e.dateRange.length>0&&(t.startTimeStr=e.dateRange[0],t.endTimeStr=e.dateRange[1]),t&&(delete t.pageNum,delete t.pageSize,delete t.dateRange);const u={query:o,entity:t};return c.post({url:"/flow/privilege/loginLog/getPagerModel",params:u})},O=e=>c.post({url:"/flow/privilege/loginLog/saveOrUpdate",params:e}),Q=e=>c.post({url:"/flow/privilege/loginLog/delete",params:e}),U=v({name:"LoginLogModal",components:{BasicModal:I,BasicForm:L},emits:["success","register"],setup(e,{emit:o}){const t=y(!0),[u,{resetFields:i,setFieldsValue:d,validate:r}]=P({labelWidth:100,schemas:x,showActionButtonGroup:!1}),[n,{setModalProps:a,closeModal:l}]=b(s=>p(this,null,function*(){i(),a({confirmLoading:!1}),t.value=!!(s!=null&&s.isUpdate),F(t)&&d(m({},s.record))})),D=A(()=>F(t)?"\u4FEE\u6539":"\u65B0\u589E");function h(){return p(this,null,function*(){try{a({confirmLoading:!0});const s=yield r();yield O(s),l(),o("success")}finally{a({confirmLoading:!1})}})}return{registerModal:n,registerForm:u,getTitle:D,handleSubmit:h}}});function $(e,o,t,u,i,d){const r=B("BasicForm"),n=B("BasicModal");return R(),S(n,k(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit}),{default:q(()=>[T(r,{onRegister:e.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}var z=_(U,[["render",$]]),X=Object.freeze(Object.defineProperty({__proto__:null,default:z},Symbol.toStringTag,{value:"Module"}));export{z as L,X as a,H as c,Q as d,K as g,J as s};
