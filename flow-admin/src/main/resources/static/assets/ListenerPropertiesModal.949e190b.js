var _=Object.defineProperty;var d=Object.getOwnPropertySymbols;var b=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var f=(o,r,e)=>r in o?_(o,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[r]=e,g=(o,r)=>{for(var e in r||(r={}))b.call(r,e)&&f(o,e,r[e]);if(d)for(var e of d(r))w.call(r,e)&&f(o,e,r[e]);return o};var c=(o,r,e)=>new Promise((p,a)=>{var u=s=>{try{i(e.next(s))}catch(n){a(n)}},m=s=>{try{i(e.throw(s))}catch(n){a(n)}},i=s=>s.done?p(s.value):Promise.resolve(s.value).then(u,m);i((e=e.apply(o,r)).next())});import{B as k,a as C}from"./index.ef1baeca.js";import{B as P}from"./BasicForm.35bf3188.js";import{u as A}from"./useForm.8dec0b63.js";import{k as D,l as L}from"./listener.data.ff554ff3.js";import{az as R,a as $,w as S,h as T,j as x,aB as B,o as O,k as U,B as V,p as j,aC as q}from"./index.741c5d36.js";import"./useWindowSizeFn.54947215.js";import"./FullscreenOutlined.d8f1076a.js";/* empty css              *//* empty css               */import"./index.d23d5e7f.js";import"./index.d4ff1276.js";import"./Checkbox.2841bc84.js";import"./index.5fb5b3b2.js";import"./index.abe396df.js";import"./index.73bb7fa2.js";import"./index.5fd79f94.js";import"./index.249616b7.js";import"./get.9f08d1a5.js";import"./index.4960ebac.js";import"./eagerComputed.1e0895dc.js";import"./index.46c568bc.js";import"./_baseIteratee.9655ef6b.js";import"./DeleteOutlined.d4d5ebae.js";import"./index.0f0cf900.js";import"./useRefs.31b824e4.js";import"./Form.41e509ff.js";import"./Col.ba611277.js";import"./useFlexGapSupport.28e961f9.js";import"./useSize.aa4022ca.js";import"./transButton.76f8f88c.js";import"./index.7b2c1cea.js";import"./index.847bc6c1.js";import"./index.ae783029.js";import"./uuid.2b29000c.js";import"./download.102dd35e.js";import"./base64Conver.08b9f4ec.js";import"./index.2f746864.js";import"./index.196769f5.js";import"./uniqBy.c3dbbda0.js";const z=$({name:"ListenerPropertiesModal",components:{BasicModal:k,BasicForm:P},emits:["success","register"],setup(o,{emit:r}){const e=S(!0);let p=[{label:"\u5B57\u7B26\u4E32",value:"string"},{label:"\u8868\u8FBE\u5F0F",value:"expression"}],a={};p.forEach(t=>{a[t.value]=t.label});const[u,{resetFields:m,updateSchema:i,setFieldsValue:s,validate:n}]=A({labelWidth:100,schemas:D,showActionButtonGroup:!1}),[F,{setModalProps:l,closeModal:h}]=C(t=>c(this,null,function*(){yield m(),l({confirmLoading:!1}),e.value=!!(t!=null&&t.isUpdate);let M=t.record;i({field:"value",label:a[M.type]}),yield i([{field:"type",componentProps:{options:p,onChange:y=>{i({field:"value",label:a[y.target.value]})}}},{field:"name",dynamicRules:()=>[{required:!0,whitespace:!0,message:"\u6807\u8BC6\u4E0D\u80FD\u4E3A\u7A7A\uFF01"},{max:80,message:"\u5B57\u7B26\u957F\u5EA6\u4E0D\u80FD\u5927\u4E8E80\uFF01"}]}]),s(g({},t.record))})),v=T(()=>x(e)?"\u4FEE\u6539":"\u65B0\u589E");function E(){return c(this,null,function*(){try{l({confirmLoading:!0});const t=yield n();yield L(t),h(),r("success")}finally{l({confirmLoading:!1})}})}return{registerModal:F,registerForm:u,getTitle:v,handleSubmit:E}}});function G(o,r,e,p,a,u){const m=B("BasicForm"),i=B("BasicModal");return O(),U(i,q(o.$attrs,{onRegister:o.registerModal,title:o.getTitle,onOk:o.handleSubmit}),{default:V(()=>[j(m,{onRegister:o.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}var De=R(z,[["render",G]]);export{De as default};
