var I=Object.defineProperty,_=Object.defineProperties;var q=Object.getOwnPropertyDescriptors;var g=Object.getOwnPropertySymbols;var y=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var B=(t,u,e)=>u in t?I(t,u,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[u]=e,D=(t,u)=>{for(var e in u||(u={}))y.call(u,e)&&B(t,e,u[e]);if(g)for(var e of g(u))M.call(u,e)&&B(t,e,u[e]);return t},E=(t,u)=>_(t,q(u));var p=(t,u,e)=>new Promise((n,a)=>{var c=o=>{try{r(e.next(o))}catch(l){a(l)}},i=o=>{try{r(e.throw(o))}catch(l){a(l)}},r=o=>o.done?n(o.value):Promise.resolve(o.value).then(c,i);r((e=e.apply(t,u)).next())});import{B as A,a as S}from"./index.ef1baeca.js";import{B as k}from"./BasicForm.35bf3188.js";import{u as v}from"./useForm.8dec0b63.js";import{bU as x,az as N,a as R,w as T,j as F,h as V,aB as w,o as $,k as j,B as O,p as U,aC as z,ez as L}from"./index.741c5d36.js";import{T as W}from"./index.abe396df.js";import{c as G,s as H}from"./positionInfo.1757fca3.js";import{F as J}from"./constantEnum.bf6653fb.js";const ne=[{title:"\u5C97\u4F4D\u540D\u79F0",dataIndex:"name",align:"left"},{title:"\u7F16\u7801",dataIndex:"code",align:"left"},{title:"\u6392\u5E8F\u7F16\u53F7",dataIndex:"orderNo",width:100,align:"left"},{title:"\u72B6\u6001",dataIndex:"status",width:80,customRender:({record:t})=>{const e=~~t.status===1,n=e?"green":"red",a=e?"\u542F\u7528":"\u505C\u7528";return x(W,{color:n},()=>a)}},{title:"\u6210\u7ACB\u65E5\u671F",dataIndex:"startDate",width:100,align:"left"}],ie=[{field:"keyword",label:"\u5173\u952E\u5B57",component:"Input",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0/\u7F16\u7801"},labelWidth:60,colProps:{span:6,lg:{span:6,offset:0},sm:{span:10,offset:0},xs:{span:16,offset:0}}}],K=[{field:"id",label:"ID",required:!1,component:"Input",show:!1},{field:"name",label:"\u5C97\u4F4D\u540D\u79F0",required:!0,component:"Input",show:!0,rules:[{required:!0,whitespace:!0,message:"\u5C97\u4F4D\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A\uFF01"},{max:80,message:"\u5B57\u7B26\u957F\u5EA6\u4E0D\u80FD\u5927\u4E8E80\uFF01"}],colProps:{span:24}},{field:"code",label:"\u7F16\u7801",required:!0,component:"Input",show:!0,colProps:{span:24}},{field:"positionSeqId",label:"\u5C97\u4F4D\u5E8F\u5217ID",required:!1,component:"Input",show:!1},{field:"positionSeqCode",label:"\u5C97\u4F4D\u5E8F\u5217\u7F16\u7801",required:!1,component:"Input",show:!1},{field:"startDate",label:"\u6210\u7ACB\u65E5\u671F",required:!1,component:"DatePicker",show:!0,colProps:{span:24}},{field:"orderNo",label:"\u6392\u5E8F\u7F16\u53F7",required:!1,component:"InputNumber",show:!0},{field:"status",label:"\u72B6\u6001",required:!1,component:"Switch",defaultValue:!0,componentProps:{checkedChildren:"\u542F\u7528",unCheckedChildren:"\u505C\u7528"},colProps:{span:24}}],Q=R({name:"PositionInfoModal",components:{BasicModal:A,BasicForm:k},emits:["success","register"],setup(t,{emit:u}){const e=T(!0),[n,{resetFields:a,updateSchema:c,setFieldsValue:i,validate:r}]=v({labelWidth:100,schemas:K,showActionButtonGroup:!1}),o=s=>[{trigger:"blur",validator:(d,h)=>h?G({id:s.id,field:s.field,fieldValue:h,fieldName:s.fieldName}).then(m=>m?Promise.resolve():Promise.reject(s.fieldName+"\u5DF2\u5B58\u5728\uFF0C\u8BF7\u4FEE\u6539\uFF01")).catch(m=>Promise.reject(m)):Promise.resolve()}],[l,{setModalProps:f,closeModal:b}]=S(s=>p(this,null,function*(){yield a(),f({confirmLoading:!1}),e.value=!!(s!=null&&s.isUpdate);let d=s.record;yield c([{field:"code",dynamicRules:()=>[{required:!0,whitespace:!0,message:"\u6807\u8BC6\u4E0D\u80FD\u4E3A\u7A7A\uFF01"},{pattern:new RegExp(J.SN),type:"string",message:"\u8BF7\u8F93\u5165\u82F1\u6587\u6216\u6570\u5B57\uFF01"},{max:40,message:"\u5B57\u7B26\u957F\u5EA6\u4E0D\u80FD\u5927\u4E8E40\uFF01"},...o({id:F(e)&&d&&d.id||"",field:"code",fieldValue:"",fieldName:"\u6807\u8BC6"})]}]),F(e)&&i(E(D({},s.record),{status:typeof d.status=="undefined"||d.status===1}))})),C=V(()=>F(e)?"\u4FEE\u6539":"\u65B0\u589E");function P(){return p(this,null,function*(){try{f({confirmLoading:!0});const s=yield r();s.status=s.status?1:0,s.startDate&&(s.startDate=L(s.startDate)),yield H(s),b(),u("success")}finally{f({confirmLoading:!1})}})}return{registerModal:l,registerForm:n,getTitle:C,handleSubmit:P}}});function X(t,u,e,n,a,c){const i=w("BasicForm"),r=w("BasicModal");return $(),j(r,z(t.$attrs,{onRegister:t.registerModal,title:t.getTitle,onOk:t.handleSubmit}),{default:O(()=>[U(i,{onRegister:t.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}var Y=N(Q,[["render",X]]),le=Object.freeze(Object.defineProperty({__proto__:null,default:Y},Symbol.toStringTag,{value:"Module"}));export{Y as P,le as a,ne as c,ie as s};
