var Q=Object.defineProperty;var M=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var A=(t,r,e)=>r in t?Q(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e,D=(t,r)=>{for(var e in r||(r={}))$.call(r,e)&&A(t,e,r[e]);if(M)for(var e of M(r))K.call(r,e)&&A(t,e,r[e]);return t};var S=(t,r,e)=>new Promise((n,i)=>{var g=s=>{try{c(e.next(s))}catch(l){i(l)}},C=s=>{try{c(e.throw(s))}catch(l){i(l)}},c=s=>s.done?n(s.value):Promise.resolve(s.value).then(g,C);c((e=e.apply(t,r)).next())});import{B as R,a as T}from"./index.ef1baeca.js";import{B as V}from"./BasicForm.35bf3188.js";import{u as E}from"./useForm.8dec0b63.js";import{a as j}from"./app.data.d11ba40f.js";import{r as z}from"./app.369d282d.js";import{p as f,s as N,az as I,a as L,D as U,I as k,fB as H,w,ft as x,j as _,h as G,aB as m,o as v,k as O,B as u,C as B,t as q,n as W,i as J,l as X,aC as Y,G as Z}from"./index.741c5d36.js";import{S as ee}from"./index.7b2c1cea.js";import"./useWindowSizeFn.54947215.js";import"./FullscreenOutlined.d8f1076a.js";/* empty css              *//* empty css               */import"./index.d23d5e7f.js";import"./index.d4ff1276.js";import"./Checkbox.2841bc84.js";import"./index.5fb5b3b2.js";import"./index.abe396df.js";import"./index.73bb7fa2.js";import"./index.5fd79f94.js";import"./index.249616b7.js";import"./get.9f08d1a5.js";import"./index.4960ebac.js";import"./eagerComputed.1e0895dc.js";import"./index.46c568bc.js";import"./_baseIteratee.9655ef6b.js";import"./DeleteOutlined.d4d5ebae.js";import"./index.0f0cf900.js";import"./useRefs.31b824e4.js";import"./Form.41e509ff.js";import"./Col.ba611277.js";import"./useFlexGapSupport.28e961f9.js";import"./useSize.aa4022ca.js";import"./transButton.76f8f88c.js";import"./index.847bc6c1.js";import"./index.ae783029.js";import"./uuid.2b29000c.js";import"./download.102dd35e.js";import"./base64Conver.08b9f4ec.js";import"./index.2f746864.js";import"./index.196769f5.js";import"./uniqBy.c3dbbda0.js";var te={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"question-circle",theme:"outlined"},re=te;function P(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?Object(arguments[r]):{},n=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(e).filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable}))),n.forEach(function(i){oe(t,i,e[i])})}return t}function oe(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var b=function(r,e){var n=P({},r,e.attrs);return f(N,P({},n,{icon:re}),null)};b.displayName="QuestionCircleOutlined";b.inheritAttrs=!1;var ne=b;const{TextArea:ie}=k,se=L({name:"SecretKeyModal",components:{BasicModal:R,BasicForm:V,Button:U,Input:k,TextArea:ie,Space:ee,Popconfirm:H,QuestionCircleOutlined:ne},emits:["success","register"],setup(t,{emit:r}){const e=w(!0),n=w(""),{createMessage:i}=Z(),{clipboardRef:g,copiedRef:C}=x(),[c,{resetFields:s,setFieldsValue:l}]=E({labelWidth:150,schemas:j,showActionButtonGroup:!1}),[h,{setModalProps:d}]=T(o=>S(this,null,function*(){yield s(),d({confirmLoading:!1}),e.value=!!(o!=null&&o.isUpdate);let y=o.record;n.value=y.secretKey,_(e)&&l(D({},o.record))})),F=G(()=>_(e)?"\u4FEE\u6539":"\u65B0\u589E");function a(o){return S(this,null,function*(){try{d({confirmLoading:!0});const y=yield z(o.id);n.value=y,l({secretKey:y})}finally{d({confirmLoading:!1})}})}function p(){try{const o=_(n);if(!o){i.warning("\u8BF7\u91CD\u65B0\u83B7\u53D6\u5BC6\u94A5\uFF01");return}g.value=o,_(C)&&i.success("\u62F7\u8D1D\u6210\u529F\uFF01")}finally{d({confirmLoading:!1})}}return{registerModal:h,registerForm:c,getTitle:F,handleCopy:p,refreshSecretKeyHandle:a}}}),ae={class:""},ce={key:0};function ue(t,r,e,n,i,g){const C=m("TextArea"),c=m("a-button"),s=m("QuestionCircleOutlined"),l=m("Popconfirm"),h=m("Space"),d=m("BasicForm"),F=m("BasicModal");return v(),O(F,Y(t.$attrs,{onRegister:t.registerModal,title:t.getTitle}),{default:u(()=>[f(d,{onRegister:t.registerForm},{snSlot:u(({model:a,field:p})=>[B(q(a[p]),1)]),secretKeySlot:u(({model:a,field:p})=>[W("div",ae,[f(C,{readonly:"",rows:3,value:a[p],"onUpdate:value":o=>a[p]=o},null,8,["value","onUpdate:value"]),f(h,{class:"mt-2"},{default:u(()=>[a.sn!=="portal"?(v(),J("span",ce,[a[p]?(v(),O(l,{key:1,title:"\u786E\u5B9A\u8981\u91CD\u65B0\u751F\u6210\u79D8\u94A5\u5417\uFF1F",onConfirm:o=>t.refreshSecretKeyHandle(a)},{icon:u(()=>[f(s,{style:{color:"red"}})]),default:u(()=>[f(c,null,{default:u(()=>[B(" \u66F4\u65B0\u5BC6\u94A5 ")]),_:1})]),_:2},1032,["onConfirm"])):(v(),O(c,{key:0,onClick:o=>t.refreshSecretKeyHandle(a)},{default:u(()=>[B(" \u751F\u6210\u5BC6\u94A5 ")]),_:2},1032,["onClick"]))])):X("",!0),f(c,{type:"primary",onClick:t.handleCopy},{default:u(()=>[B(" \u590D\u5236 ")]),_:1},8,["onClick"])]),_:2},1024)])]),_:1},8,["onRegister"])]),_:1},16,["onRegister","title"])}var Xe=I(se,[["render",ue]]);export{Xe as default};
